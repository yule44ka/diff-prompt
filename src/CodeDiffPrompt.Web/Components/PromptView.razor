<div class="llm-response-container">
    @if (IsLoading)
    {
        <div class="loading-spinner">
            <div class="spinner-border text-primary" role="status">
                <span class="visually-hidden">Loading...</span>
            </div>
            <p class="mt-3">Generating prompt...</p>
        </div>
    }
    else if (!string.IsNullOrEmpty(Prompt))
    {
        <div class="response-content">
            <h3>Generated Prompt</h3>
            <div class="response-text">
                @((MarkupString)FormatPrompt(Prompt))
            </div>
        </div>
    }
    else
    {
        <div class="empty-state">
            <p class="text-muted">Click "Generate Prompt" to see the prompt here.</p>
        </div>
    }
</div>

@code {
    [Parameter]
    public string Prompt { get; set; } = "";

    [Parameter]
    public bool IsLoading { get; set; } = false;

    private string FormatPrompt(string prompt)
    {
        if (string.IsNullOrWhiteSpace(prompt))
            return "";

        // Basic markdown-like formatting
        var formatted = System.Web.HttpUtility.HtmlEncode(prompt);
        
        // Convert line breaks to <br>
        formatted = formatted.Replace("\n", "<br>");
        
        // Bold text between ** **
        formatted = System.Text.RegularExpressions.Regex.Replace(
            formatted, 
            @"\*\*(.+?)\*\*", 
            "<strong>$1</strong>");
        
        // Bullet points
        formatted = System.Text.RegularExpressions.Regex.Replace(
            formatted,
            @"^- (.+?)$",
            "<li>$1</li>",
            System.Text.RegularExpressions.RegexOptions.Multiline);

        return formatted;
    }
}


